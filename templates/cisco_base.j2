{# description: Base configuration template for Cisco IOS devices #}
!
! Base Configuration Template for Cisco IOS devices
! Generated by NetMan at {{ now() }}
!
hostname {{ hostname }}

{% if domain_name is defined %}
ip domain-name {{ domain_name }}
{% endif %}

! Configure authentication
{% if enable_secret is defined %}
enable secret {{ enable_secret }}
{% endif %}

! Configure login credentials
{% if username is defined and password is defined %}
username {{ username }} privilege 15 secret {{ password }}
{% endif %}

! Configure SSH access
{% if ssh_enabled|default(true) %}
ip ssh version 2
ip ssh authentication-retries 3
ip ssh time-out 60
{% endif %}

! VTY line configuration
line vty 0 4
 transport input ssh
 login local
 exit

! Configure interfaces
{% for intf in interfaces|default([]) %}
interface {{ intf.name }}
 description {{ intf.description|default("") }}
 {% if intf.ip is defined %}
 ip address {{ intf.ip }} {{ intf.netmask }}
 {% endif %}
 {% if intf.shutdown|default(false) %}
 shutdown
 {% else %}
 no shutdown
 {% endif %}
 exit
{% endfor %}

! Configure routing
{% if routing is defined and routing %}
{% if ospf is defined %}
router ospf {{ ospf.process_id }}
 {% for network in ospf.networks %}
 network {{ network.address }} {{ network.wildcard }} area {{ network.area }}
 {% endfor %}
 exit
{% endif %}
{% endif %}

! Configure NTP
{% if ntp_servers is defined %}
{% for server in ntp_servers %}
ntp server {{ server }}
{% endfor %}
{% endif %}

! Configure logging
{% if syslog_servers is defined %}
{% for server in syslog_servers %}
logging host {{ server }}
{% endfor %}
logging trap notifications
logging source-interface {{ logging_source_interface|default("Loopback0") }}
{% endif %}

! Configure SNMP
{% if snmp_community is defined %}
snmp-server community {{ snmp_community }} RO
{% endif %}
{% if snmp_contact is defined %}
snmp-server contact {{ snmp_contact }}
{% endif %}
{% if snmp_location is defined %}
snmp-server location {{ snmp_location }}
{% endif %}

! Configure banner
{% if banner is defined %}
banner motd ^
{{ banner }}
^
{% endif %}

! Save configuration
end
write memory
